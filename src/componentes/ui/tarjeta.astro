---
import { Image } from 'astro:assets';
import Boton from './boton.astro';
import dummyImage from '../../assets/Imagenes/Dummy.webp';

// Type for image assets imported in Astro
type ImageAsset = {
  src: string;
  width: number;
  height: number;
  format: 'jpeg' | 'jpg' | 'png' | 'tiff' | 'webp' | 'gif' | 'svg' | 'avif';
};

interface Props {
  titulo: string;
  descripcion: string;
  precio?: string;
  imagen?: string | ImageAsset;
  colorTema?: 'primario' | 'secundario' | 'neutro';
  href?: string;
}

const {
  titulo,
  descripcion,
  precio,
  imagen = dummyImage,
  colorTema = 'primario',
  href,
} = Astro.props;

// Configuración de colores según el tema
const colores = {
  primario: {
    precio: 'text-primary'
  },
  secundario: {
    precio: 'text-secondary'
  },
  neutro: {
    precio: 'text-gray-600'
  }
};

const color = colores[colorTema];
---

<!-- Tarjeta con estilo de Guatapé: efecto de elevación y zoom -->
<div
  class="group relative flex h-full flex-col overflow-hidden rounded-2xl bg-white shadow-lg transition-all duration-500 hover:scale-105 hover:shadow-2xl"
>
  <!-- Imagen con overlay -->
  <div class="relative h-48 shrink-0 overflow-hidden bg-gray-100">
    <Image
      src={imagen as any}
      alt={titulo}
      class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-110"
      width={800}
      height={600}
      loading="lazy"
      decoding="async"
    />
    <div
      class="absolute inset-0 bg-linear-to-t from-black/60 via-transparent to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100"
    >
    </div>
  </div>

  <!-- Contenido -->
  <div class="flex grow flex-col px-6 py-4">
    <h3 class="mb-2 font-[Poppins] text-xl font-bold text-gray-800">{titulo}</h3>
    <p class="mb-4 grow font-[Inter] text-gray-600 leading-relaxed">{descripcion}</p>

    <!-- Pie de tarjeta -->
    <div class="mt-auto flex flex-col items-start justify-start gap-3">
      {precio && <span class={`font-[Poppins] font-semibold ${color.precio}`}>{precio}</span>}
      <div class="mt-2 flex justify-start">
        <Boton texto="Ver más" variante={colorTema} href={href} />
      </div>
    </div>
  </div>
</div>
