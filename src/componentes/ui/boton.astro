---
interface Props {
  texto: string;
  variante: 'primario' | 'secundario' | 'neutro';
  clasePersonalizada?: string;
  href?: string;
  target?: '_blank' | '_self';
  type?: 'button' | 'submit' | 'reset';
}

const { texto, variante, clasePersonalizada = '', href, target = '_self', type = 'button' } = Astro.props;

// Configuración de colores según la variante usando variables del tema
const configuraciones = {
  primario: {
    bg: 'bg-primary',
    hoverBg: 'hover:bg-primary-hover',
    glow: 'bg-primary',
  },
  secundario: {
    bg: 'bg-secondary',
    hoverBg: 'hover:bg-secondary-hover',
    glow: 'bg-secondary',
  },
  neutro: {
    bg: 'bg-gray-600',
    hoverBg: 'hover:bg-gray-700',
    glow: 'bg-gray-600',
  },
};

const config = configuraciones[variante];

// Detectar si hay clases personalizadas que sobrescriben estilos base
const customHasBg = clasePersonalizada.includes('bg-');
const customHasText = clasePersonalizada.includes('text-');
const customHasHover = clasePersonalizada.includes('hover:bg-');

// Solo aplicar estilos base si no hay sobrescritura en clases personalizadas
const bgClass = customHasBg ? '' : config.bg;
const hoverBgClass = customHasHover ? '' : config.hoverBg;
const textClass = customHasText ? '' : 'text-white';

// Clases compartidas entre botón y enlace
const sharedClasses = `relative w-auto transform overflow-hidden rounded-2xl ${bgClass} ${hoverBgClass} px-8 py-2 font-[Poppins] text-base font-semibold tracking-wide ${textClass} shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-2xl active:scale-95 ${clasePersonalizada}`;
---

<div class="group relative overflow-hidden rounded-2xl">
  {href ? (
    <a
      href={href}
      target={target}
      rel={target === '_blank' ? 'noopener noreferrer' : undefined}
      class={sharedClasses}
    >
      <span class="relative z-10">{texto}</span>
      <div
        class="absolute inset-0 -translate-x-full bg-linear-to-r from-transparent via-white/10 to-transparent transition-transform duration-700 group-hover:translate-x-full"
      >
      </div>
    </a>
  ) : (
    <button
      type={type}
      class={sharedClasses}
    >
      <span class="relative z-10">{texto}</span>
      <div
        class="absolute inset-0 -translate-x-full bg-linear-to-r from-transparent via-white/10 to-transparent transition-transform duration-700 group-hover:translate-x-full"
      >
      </div>
    </button>
  )}
  <div
    class={`${config.glow} absolute inset-0 -z-10 rounded-lg opacity-0 blur-sm transition-opacity duration-300 group-hover:opacity-20 pointer-events-none`}
  >
  </div>
</div>
